package main

import "fmt"

func main() {
	// 1. トップレベル（main関数内）のスコープ
	x := 10
	fmt.Printf("1. main直下の x: %d (アドレス: %p)\n", x, &x)

	// 2. 新しいブロック（if文やfor文とか）
	if true {
		// ここでシャドーイングが発生する
		// := を使うと、外側の x とは別の「新しい変数 x」がこのブロック内に作られる
		x := 50 
		
		fmt.Printf("2. ifブロック内の x: %d (アドレス: %p)\n", x, &x)
		fmt.Println("   ↑ 外側のxとは別物（アドレスが違う）")
	}

	// 3. ifブロックを抜けた後
	// ifの中で x := 50 としたが、外側の x はこの時点でも書き換わっていない
	fmt.Printf("3. ifを抜けた後の x: %d (アドレス: %p)\n", x, &x)

	fmt.Println("---------------------------------------")

	// 4. 正しく「更新」したい場合
	if true {
		// := ではなく = を使う
		x = 100 
		fmt.Printf("4. 更新後の x: %d (アドレス: %p)\n", x, &x)
	}
	
	fmt.Printf("5. 最終的な mainの x: %d\n", x)
}

/*
スコープとは、その変数が有効となる範囲。Goでは{ }の間がスコープとされる
シャドーイングは同じ命名を受けた変数が別のスコープで定義されることを示している
*/